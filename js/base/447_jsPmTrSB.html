<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>prime/timers/stop-button</title>
</head>

<body>
  <a href="https://code.mu/ru/javascript/book/prime/timers/stop-button/">
    Кнопки для запуска и остановки таймера на JavaScript
  </a>

  <br>
  <br>
  <section>
    <button id='startBtn'>Start</button>
    <button id='stopBtn'>Stop</button>
  </section>

  <br>
  <br>

  <section>
    <input type="submit" id="start" value="start">
    <input type="submit" id="stop" value="stop">
  </section>

  <script>

    console.log(`Пусть дана переменная, в которой изначально хранится число 100.
    Даны также две кнопки. По нажатию на первую кнопку запустите таймер, который каждую секунду будет уменьшать значение переменной на 1 и выводить новое значение в консоль.
    Как только значение переменной достигнет нуля - остановите таймер.
    По нажатию на вторую кнопку остановите таймер.
    Также остановите таймер, если вторая кнопка не была нажата, но значение переменной достигло нуля.`);
    let counter1 = 100;
    let interval1;

    document.getElementById('startBtn').addEventListener('click', function startCounter() {
      interval1 = setInterval(() => {
        if (counter1 === 0) {
          clearInterval(interval1);
        } {
          console.log(counter1--);
        }
      }, 1000);

      this.removeEventListener('click', startCounter);
    });

    document.getElementById('stopBtn').addEventListener('click', () => {
      clearInterval(interval1);
    });

  </script>

  <script>
    console.log(`Некоторый программист написал код, который по нажатию на кнопку запускает таймер, выводящий в консоль текущий момент времени:
    После запуска кода, однако, оказалось, что кнопка остановки не работает. Исправьте ошибку автора кода.
    `);


    let start = document.querySelector('#start');
    let stop = document.querySelector('#stop');

    let timerId;

    start.addEventListener('click', startTimer);

    stop.addEventListener('click', function stop() {
      clearInterval(timerId);
      start.addEventListener('click', startTimer);

    });

    function startTimer() {
      timerId = setInterval(function () {
        let date = new Date;
        console.log(date.getMinutes() + ' ' + date.getSeconds());
      }, 1000);
      this.removeEventListener('click', startTimer);
    }

  </script>

</body>

</html>