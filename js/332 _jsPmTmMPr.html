<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>time/moments/practucum</title>
</head>

<body>
  <a href="https://code.mu/ru/javascript/book/prime/time/moments/practucum/">
    Практика на получение моментов времени в JavaScript
  </a>

  <script>
    let now = new Date();
    let days = ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'];

    task1();
    task2();
    task3();
    task4();
    task5();
    task6();
    task7();
    task8();
    task9();

    function task1() {
      console.log(`1. Определите, сколько секунд прошло с начала дня до настоящего момента времени.`);
      let startDay = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      console.log((now - startDay) / 1000 + 'секунд.');
    }

    function task2() {
      console.log('2. Определите, сколько секунд осталось до конца дня.');
      let endDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59);
      console.log((endDay - now) / 1000 + 1 + 'секунд.');
    }

    function task3() {
      console.log('3. Определите, сколько дней осталось до нового года.');
      let nextYear = now.getFullYear() + 1;
      let newYear = new Date(nextYear, 0);
      console.log((newYear - now) / 1000 / 60 / 60 / 24);
    }

    function task4() {
      console.log('4. Определите, сколько пятниц 13-е в текущем году.');

      let quantityFriday13InCurYear = 0;
      for (let month = 0; month < 12; month++) {
        let date = new Date(now.getFullYear(), month, 13);
        if (date.getDay() === 5) {
          console.log(date);
          quantityFriday13InCurYear++;
        };
      }

      console.log(`Пятниц в ${now.getFullYear()} году ${quantityFriday13InCurYear} шт.`);

      //Первое решение.
      // let firstDayCurYear = new Date(now.getFullYear(), 0).getDay();
      // let quantityDaysNeedAdd = 5 - firstDayCurYear + 1;
      // let dateFirstFridayCurYear = new Date(now.getFullYear(), 0, quantityDaysNeedAdd);
      // let dateNexFriday = new Date(now.getFullYear(), 0, quantityDaysNeedAdd + 7);
      // let quantityFriday13InCurYear = 0;

      // for (let week = 0, counterSeven = 0; week < 51; week++, counterSeven += 7) {
      //   dateNexFriday = new Date(now.getFullYear(), 0, quantityDaysNeedAdd + counterSeven);
      //   dateNexFriday.getDate() === 13 ? quantityFriday13InCurYear++ : '';
      // }

      // console.log(quantityFriday13InCurYear);
    }

    function task5() {
      console.log('5. Определите, какой год был 3 месяца назад.');
      console.log(new Date(now.getFullYear(), now.getMonth() - 3).getFullYear());
    }

    function task6() {
      console.log('6. Определите, какой день недели будет в последнем дне текущего месяца.');
      console.log(days[new Date(now.getFullYear(), now.getMonth() + 1, 0).getDay()]);
    }

    function task7() {
      console.log('7. Напишите код, который будет определять, високосный ли текущий год.');
      console.log(new Date(now.getFullYear(), 2, 0).getDate() === 29 ? true : false);
    }

    function task8() {
      console.log('8. Напишите код, который будет находить предыдущий високосный год.');
      let result;
      let counter = 0;
      let years = 0;
      let year;

      while (counter < 2) {
        let date = new Date(now.getFullYear() - years, 2, 0);
        if (date.getDate() === 29) {
          counter++;
          year = date.getFullYear();
        }
          years++;
      }

      console.log(year);
    }

    function task9() {
      console.log('8. Напишите код, который будет находить предыдущий високосный год.');
      let result;
      let counter = 0;
      let years = 0;
      let year;

      while (counter < 2) {
        let date = new Date(now.getFullYear() + years, 2, 0);
        if (date.getDate() === 29) {
          counter++;
          year = date.getFullYear();
        }
          years++;
      }

      console.log(year);
    }

  </script>
</body>

</html>